<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hub - Family Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f2f5; }
        .hub-title { font-family: 'Pacifico', cursive; }
        .page { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .nav-icon.active svg { color: #3b82f6; }
        .nav-icon.active::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 24px; height: 4px; background-color: #3b82f6; border-radius: 2px; }
        .list-item { transition: background-color 0.2s; cursor: pointer; }
        .list-item:hover { background-color: #f8fafc; }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div class="max-w-4xl mx-auto p-4 md:p-6 pb-24">
        <header class="py-3 mb-2">
            <h1 class="hub-title text-4xl text-orange-500">hub</h1>
        </header>

        <nav class="bg-white rounded-2xl shadow-md p-2 my-4 sticky top-4 z-10">
            <div class="flex justify-around items-center">
                <!-- Navigation Icons -->
                <button class="nav-icon relative p-2" data-page="hub"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></button>
                <button class="nav-icon relative p-2" data-page="calendar"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg></button>
                <button class="nav-icon relative p-2" data-page="shopping"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg></button>
                <button class="nav-icon relative p-2" data-page="health"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M3.22 12H9.5l.7-1.5L11.5 13l1.2-2.5L14.5 12H21"></path></svg></button>
                <button class="nav-icon relative p-2" data-page="meals"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Z"></path><path d="M11 22v-4c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v4"></path></svg></button>
                <button class="nav-icon relative p-2" data-page="contacts"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg></button>
            </div>
        </nav>

        <main id="main-content">
            <!-- Hub/Dashboard Page -->
            <div id="hub-page" class="page">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-5 rounded-xl shadow-md col-span-1 md:col-span-2">
                        <h2 class="text-xl font-bold mb-1">Today's Schedule</h2>
                        <p id="current-date" class="text-sm text-gray-500 mb-4"></p>
                        <div id="schedule-list" class="space-y-1"></div>
                    </div>
                    <div class="bg-white p-5 rounded-xl shadow-md">
                        <h2 class="text-xl font-bold mb-4">Meals</h2>
                        <div id="meals-list" class="space-y-1"></div>
                    </div>
                    <div class="bg-white p-5 rounded-xl shadow-md">
                        <h2 class="text-xl font-bold mb-4">Shopping Lists</h2>
                        <div id="shopping-list" class="space-y-1"></div>
                    </div>
                    <div class="bg-white p-5 rounded-xl shadow-md col-span-1 md:col-span-2">
                        <h2 class="text-xl font-bold mb-4">Upcoming</h2>
                         <div id="upcoming-list" class="space-y-1"></div>
                    </div>
                </div>
            </div>
            <!-- Placeholder pages -->
            <div id="calendar-page" class="page hidden"><div class="bg-white p-6 rounded-xl shadow-md text-center"><h2 class="text-2xl font-bold mb-2">Calendar</h2><p class="text-gray-600">Full calendar view.</p></div></div>
            <div id="shopping-page" class="page hidden"><div class="bg-white p-6 rounded-xl shadow-md text-center"><h2 class="text-2xl font-bold mb-2">Shopping Lists</h2><p class="text-gray-600">Manage all lists here.</p></div></div>
            <div id="health-page" class="page hidden"><div class="bg-white p-6 rounded-xl shadow-md text-center"><h2 class="text-2xl font-bold mb-2">Health</h2><p class="text-gray-600">Manage appointments and medications.</p></div></div>
            <div id="meals-page" class="page hidden"><div class="bg-white p-6 rounded-xl shadow-md text-center"><h2 class="text-2xl font-bold mb-2">Meal Planner</h2><p class="text-gray-600">Weekly meal planner view.</p></div></div>
            <div id="contacts-page" class="page hidden"><div class="bg-white p-6 rounded-xl shadow-md text-center"><h2 class="text-2xl font-bold mb-2">Contacts</h2><p class="text-gray-600">Important contacts list.</p></div></div>
        </main>
    </div>

    <!-- Floating Action Button -->
    <button id="add-item-btn" class="fixed bottom-8 right-8 bg-orange-500 hover:bg-orange-600 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-transform transform hover:scale-110 z-20">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
    </button>
    
    <!-- Universal Edit/Add Modal -->
    <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg p-6 shadow-xl w-full max-w-md">
            <h3 id="modal-title" class="text-2xl font-bold mb-6">Edit Item</h3>
            <form id="edit-form">
                <div id="modal-form-content" class="space-y-4">
                    <!-- Dynamic form fields will be injected here -->
                </div>
                <div class="flex justify-end space-x-4 mt-8">
                    <button type="button" id="cancel-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancel</button>
                    <button type="submit" id="save-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATA STORE ---
        // Using objects with unique IDs for proper tracking
        let data = {
            schedule: [
                { id: 1, time: '8:00 AM', title: 'Drop off Leo at School', person: 'Dad' },
                { id: 2, time: '10:30 AM', title: 'Dentist Appointment', person: 'Mom' },
                { id: 3, time: '4:00 PM', title: 'Soccer Practice', person: 'Leo' },
            ],
            meals: [
                { id: 4, title: 'Pancakes & Berries', label: 'Breakfast' },
                { id: 5, title: 'Chicken Salad Sandwiches', label: 'Lunch' },
                { id: 6, title: 'Spaghetti Bolognese', label: 'Dinner' },
            ],
            shopping: [
                { id: 7, name: 'Grocery Run' },
                { id: 8, name: 'Hardware Store' },
            ],
            upcoming: [
                { id: 9, title: 'Grandma\'s Birthday', details: 'Sunday, Sep 14th' },
                { id: 10, title: 'Parent-Teacher Conference', details: 'Wednesday, Sep 17th' },
            ]
        };

        // --- GLOBAL STATE ---
        let currentPageId = 'hub';
        const today = new Date();
        const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').textContent = today.toLocaleDateString('en-US', dateOptions);

        // --- DOM ELEMENTS ---
        const modal = document.getElementById('edit-modal');
        const modalTitle = document.getElementById('modal-title');
        const formContent = document.getElementById('modal-form-content');
        const editForm = document.getElementById('edit-form');

        // --- RENDER FUNCTIONS ---
        function renderAll() {
            renderSchedule();
            renderMeals();
            renderShopping();
            renderUpcoming();
        }

        function renderSchedule() {
            const listEl = document.getElementById('schedule-list');
            listEl.innerHTML = data.schedule.map(item => `
                <div class="list-item flex items-center space-x-4 p-3 rounded-lg" data-id="${item.id}" data-type="schedule">
                    <div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6 text-gray-400"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></div>
                    <div class="flex-grow">
                        <p class="font-semibold">${item.time} - ${item.title}</p>
                        <p class="text-sm text-gray-500">Assigned to: ${item.person}</p>
                    </div>
                    <span class="text-sm font-medium bg-gray-100 text-gray-700 py-1 px-3 rounded-full">${item.person}</span>
                </div>`).join('');
        }

        function renderMeals() {
            const listEl = document.getElementById('meals-list');
            listEl.innerHTML = data.meals.map(item => `
                <div class="list-item flex items-center space-x-4 p-3 rounded-lg" data-id="${item.id}" data-type="meals">
                    <div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6 text-green-500"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path></svg></div>
                    <div>
                        <p class="font-medium">${item.title}</p>
                        <p class="text-sm text-gray-500">${item.label}</p>
                    </div>
                </div>`).join('');
        }

        function renderShopping() {
            const listEl = document.getElementById('shopping-list');
            listEl.innerHTML = data.shopping.map(item => `
                <div class="list-item flex items-center space-x-3 p-3 rounded-lg" data-id="${item.id}" data-type="shopping">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 text-gray-500"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path></svg>
                    <span class="font-medium">${item.name}</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 text-gray-400 ml-auto"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </div>`).join('');
        }
        
        function renderUpcoming() {
            const listEl = document.getElementById('upcoming-list');
            listEl.innerHTML = data.upcoming.map(item => `
                <div class="list-item flex items-center space-x-4 p-3 rounded-lg" data-id="${item.id}" data-type="upcoming">
                    <div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6 text-blue-500"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="16" y2="12"></line><line x1="12" x2="12.01" y1="8" y2="8"></line></svg></div>
                    <div class="flex-grow">
                         <p class="font-semibold">${item.title}</p>
                         <p class="text-sm text-gray-500">${item.details}</p>
                    </div>
                </div>`).join('');
        }

        // --- MODAL & FORM LOGIC ---
        function createFormField(label, id, value) {
            return `
                <div>
                    <label for="${id}" class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                    <input type="text" id="${id}" value="${value}" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2 border">
                </div>`;
        }
        
        function openModal(type, itemId = null) {
            const isNew = itemId === null;
            let item = {};
            
            modal.dataset.type = type;
            modal.dataset.id = itemId;

            if (isNew) {
                modalTitle.textContent = `Add New ${type.charAt(0).toUpperCase() + type.slice(1)} Item`;
            } else {
                modalTitle.textContent = `Edit ${type.charAt(0).toUpperCase() + type.slice(1)} Item`;
                item = data[type].find(d => d.id == itemId);
            }
            
            let formHtml = '';
            switch(type) {
                case 'schedule':
                    formHtml = createFormField('Time', 'edit-time', item.time || '') +
                               createFormField('Event Title', 'edit-title', item.title || '') +
                               createFormField('Assigned To', 'edit-person', item.person || '');
                    break;
                case 'meals':
                    formHtml = createFormField('Meal Name', 'edit-title', item.title || '') +
                               createFormField('Label (e.g., Breakfast)', 'edit-label', item.label || '');
                    break;
                case 'shopping':
                    formHtml = createFormField('List Name', 'edit-name', item.name || '');
                    break;
                case 'upcoming':
                     formHtml = createFormField('Title', 'edit-title', item.title || '') +
                                createFormField('Date / Details', 'edit-details', item.details || '');
                    break;
            }
            formContent.innerHTML = formHtml;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        editForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const type = modal.dataset.type;
            const id = modal.dataset.id;
            const isNew = id === 'null';

            let updatedItem = {};
            switch(type) {
                case 'schedule':
                    updatedItem = { time: document.getElementById('edit-time').value, title: document.getElementById('edit-title').value, person: document.getElementById('edit-person').value };
                    break;
                case 'meals':
                    updatedItem = { title: document.getElementById('edit-title').value, label: document.getElementById('edit-label').value };
                    break;
                case 'shopping':
                    updatedItem = { name: document.getElementById('edit-name').value };
                    break;
                case 'upcoming':
                    updatedItem = { title: document.getElementById('edit-title').value, details: document.getElementById('edit-details').value };
                    break;
            }
            
            if (isNew) {
                updatedItem.id = Date.now(); // Simple unique ID
                data[type].push(updatedItem);
            } else {
                const itemIndex = data[type].findIndex(d => d.id == id);
                data[type][itemIndex] = { ...data[type][itemIndex], ...updatedItem };
            }
            
            renderAll();
            closeModal();
        });

        document.getElementById('cancel-btn').addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });

        // --- EVENT LISTENERS ---
        document.getElementById('main-content').addEventListener('click', function(e) {
            const listItem = e.target.closest('.list-item');
            if (listItem) {
                const { id, type } = listItem.dataset;
                openModal(type, id);
            }
        });

        document.getElementById('add-item-btn').addEventListener('click', () => {
             // On the hub page, default to adding a schedule item. On other pages, it would match that page.
            const typeToAdd = currentPageId === 'hub' ? 'schedule' : currentPageId;
            openModal(typeToAdd);
        });

        document.querySelectorAll('.nav-icon').forEach(button => {
            button.addEventListener('click', () => {
                currentPageId = button.dataset.page;
                // In a real app, this would show/hide full pages. Here we just update state.
                document.querySelectorAll('.page').forEach(p => p.classList.toggle('hidden', p.id !== `${currentPageId}-page`));
                document.querySelectorAll('.nav-icon').forEach(b => b.classList.remove('active'));
                button.classList.add('active');
            });
        });
        document.querySelector('.nav-icon[data-page="hub"]').classList.add('active');


        // --- INITIAL RENDER ---
        renderAll();
    });
    </script>
</body>
</html>

